{% extends "layout.html" %}

{% block title %}
    Change Cash
{% endblock %}

{% block main %}
    <table class="table">
        <tbody>
            <tr>
                <td>{{ cash | usd }}</td>
            </tr>
        </tbody>
    </table>

    <form action="/cash" method="post">
        <div class="form-group">
            <input autocomplete="off" autofocus class="form-control" name="change" placeholder="Change cash" type="text">
        </div>

<!--
        <button class="btn btn-primary" type="submit" name="add" value="add">Add</button>
        <button class="btn btn-primary" type="submit" name="subtract" value="subtract">Subtract</button>
-->
<!--
        <button class="btn btn-primary" type="submit" name="operation" value="add">Add</button>
        <button class="btn btn-primary" type="submit" name="operation" value="subtract">Subtract</button>
-->

                <!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-cash-operation="add">
  Add
</button>
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-cash-operation="subtract">
  Subtract
</button>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Confirmation</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
          Confirm or cancel?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <button type="submit" class="btn btn-primary" name="operation">Confirm</button>
      </div>
    </div>
  </div>
</div>

<script>
/*    $("#exampleModal").on("show.bs.modal", function(event) {
        let operation = $(event.relatedTarget).data("cash-operation")

        if (operation === "subtract") {
            cash = parseFloat($("td").html().slice(1))
            change = parseFloat($("input[name='change']").val())
            console.log(cash, change)
        }
    })
*/

    $("#exampleModal").on("shown.bs.modal", function(event) {
        let operation = $(event.relatedTarget).data("cash-operation")

        let modal = $(this)
        let confirmButton = modal.find("button[type='submit'][name='operation']")
        confirmButton.attr("value", operation)
    })
</script>

    </form>

{% endblock %}
